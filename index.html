<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Journey of the Bumblebee</title>
    <style media="screen">
      canvas { box-shadow: rgba(0,0,0,0.2) 0 0 10px }
    </style>
  </head>
  <body>

    <canvas id="canvas" width="300" height="300"></canvas>

    <script src="build/main.js"></script>

    <script type="text/javascript">


      var data = new Float32Array(100)

      var bee = {
        x:0,
        y:150,
        dx:3,
        dy:0
      }

      var flowers = [
        {
          x:70,
          y:80,
          pollen:20,
          remain:20
        },
        {
          x:150,
          y:70,
          pollen:20,
          remain:20
        }]


      var ctx = canvas.getContext('2d')

      var repaint = true

      function draw(t) {
        requestAnimationFrame(draw)

        if(repaint) {

          // the path of the bumblebee
          var path = jotbb.simulate(bee, flowers)

          jotbb.render(ctx, bee, flowers, path)

          repaint = false
        }

      }

      requestAnimationFrame(draw)





      canvas.addEventListener('mousemove', function(e){

        if(e.buttons || e.webkitForce) {
          var flower = jotbb.nearest(flowers, e.clientX, e.clientY)

          if(flower) {
            flower.x = e.clientX
            flower.y = e.clientY
          }

          repaint = true
        }

      }, false)



    </script>

  </body>
</html>
